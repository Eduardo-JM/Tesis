%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Language & localization

\selectlanguage{spanish}
\crefname{table}{tabla}{tablas}
\crefname{Table}{Tabla}{Tablas}
\crefname{reaction}{reacción}{reacciones}
\Crefname{Reaction}{Reacción}{Reacciones}
\crefname{section}{sección}{secciones}
\crefname{Section}{Sección}{Secciones}
\crefname{equation}{}{}
\crefname{Equation}{}{}
\crefname{figure}{fig.}{figs.}
\Crefname{figure}{Fig.}{Figs.}
\decimalpoint
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Math & chem

%\newcommand*\fancyrefrctlabelprefix{rct}
\chemsetup{
	reactions/own-counter = true
}

\sisetup{
	sticky-per
}

\DeclareSIUnit\day{day}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Table

%\UseTblrLibrary{booktabs, siunitx}

\DefTblrTemplate{contfoot-text}{normal}{Continúa en la siguiente página}
\DefTblrTemplate{conthead-text}{normal}{(Continuación)}
\SetTblrTemplate{conthead-text}{normal}
\SetTblrTemplate{contfoot-text}{normal}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Fonts, list & titles

\setlength{\parindent}{0pt}
\setlength{\parskip}{1em}

\defaultfontfeatures{Ligatures=TeX}
\setmainfont{Times New Roman}

\titleformat{\chapter}[display]
    {\normalfont\huge\bfseries}{\chaptertitlename\ \thechapter}{20pt}{\Huge\raggedright}
\titlespacing*{\chapter}{0pt}{0pt}{0pt}

% Define a new Font family, use only if it doesn't recognize your fonts

\newfontfamily{\BellMT}{Bell MT}[
	Extension = .ttf,
	Path = /usr/share/fonts/bell-mt/,
	BoldFont = BELLB,
	ItalicFont = BELLI
]

\newfontfamily{\Footlight}{FTLTLT}[
	Extension = .ttf,
	Path = /usr/share/fonts/Footlight-MT/,
	BoldFont = footlight-mt-bold
]

%% Custom section

\setcounter{tocdepth}{3}
\setcounter{secnumdepth}{3}

%\titleclass{\subsubsection}{straight}[\subsection]
%\newcounter{subsubsection}[subsection]
%\renewcommand\thesubsubsection{\thesubsection.\arabic{subsubsection}}

%\titleclass{\subsubsubsection}{straight}[\subsection]
%\newcounter{subsubsubsection}[subsubsection]
%\renewcommand\thesubsubsubsection{\thesubsubsection.\arabic{subsubsubsection}}
%
%\titleformat{\section}{\normalfont\fontsize{16}{15}\bfseries}{\thesection}{1em}{}
%\titleformat{\subsection}{\normalfont\fontsize{14}{15}\bfseries}{\thesubsection}{1em}{}
%\titleformat{\subsubsection}{\normalfont\fontsize{14}{14}\bfseries}{\thesubsubsection}{1em}{}
%\titleformat{\subsubsubsection}{\normalfont\fontsize{12}{12}\bfseries}{\thesubsubsubsection}{1em}{}
%
%\titlespacing\section{0pt}{12pt plus 4pt minus 2pt}{0pt plus 2pt minus 2pt}
%\titlespacing\subsection{0pt}{10pt plus 4pt minus 2pt}{0pt plus 2pt minus 2pt}
%\titlespacing\subsubsection{0pt}{10pt plus 4pt minus 2pt}{0pt plus 2pt minus 2pt}
%\titlespacing*{\subsubsubsection}{0pt}{10pt plus 4pt minus 2pt}{10pt plus 2pt minus 2pt}
%
%\makeatletter
%	\renewcommand\paragraph{\@startsection{paragraph}{5}{\z@}%
%		{3.25ex \@plus1ex \@minus.2ex}%
%		{-1em}%
%		{\normalfont\normalsize\bfseries}}
%	\renewcommand\subparagraph{\@startsection{subparagraph}{6}{\parindent}%
%		{3.25ex \@plus1ex \@minus .2ex}%
%		{-1em}%
%		{\normalfont\normalsize\bfseries}}
%	\def\toclevel@subsubsubsection{4}
%	\def\toclevel@paragraph{5}
%	\def\toclevel@paragraph{6}
%	\def\l@subsubsubsection{\@dottedtocline{4}{7em}{4em}}
%	\def\l@paragraph{\@dottedtocline{5}{10em}{5em}}
%	\def\l@subparagraph{\@dottedtocline{6}{14em}{6em}}
%\makeatother
%
%\setlength{\parskip}{10pt}
%\setcounter{secnumdepth}{4}
%\setcounter{tocdepth}{4}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Figures, tables & Drawings

\graphicspath{{./Figures/}}

\pgfkeys{/forest,
	rect/.append style={rectangle, rounded corners=2pt, /tikz/align=center},
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Bibliography, glossary & quotes

\setquotestyle[mexican]{spanish}
\SetBlockThreshold{40}
\addbibresource{Bib/References.bib}

\DeclareFieldFormat{url}{%
%  \mkbibacro{URL}\addcolon\space
	\href{#1}{\nolinkurl{\thefield{urlraw}}}}

\newglossarystyle{custommcolalttree}{%
	\setglossarystyle{mcolalttree}%
	\renewcommand{\glossaryheader}{\vspace{\dimexpr -\baselineskip -\parskip}}
}

\newglossary[slg]{csymbols}{syi}{syg}{\glssymbolsgroupname}
\glsaddkey{unit}{\glsentrytext{\glslabel}}{\glsentryunit}{\GLsentryunit}{\glsunit}{\Glsunit}{\GLSunit}
\glssetnoexpandfield{unit}

\newglossarystyle{symbolunittable}{
    \setglossarystyle{long3colheader}
    \renewenvironment{theglossary}{
    		\renewcommand*{\arraystretch}{1.5}
		\begin{longtable}{
			p{2cm} p{8cm}>{\centering\arraybackslash}p{4cm}
		}
	}
	{
		\end{longtable}
	}
	\renewcommand*{\glossaryheader}{
		\bfseries Símbolo & \bfseries Descripción & \bfseries Unidades \\\hline\endhead
	}
	\renewcommand*{\glossentry}[2]{
		\glstarget{##1}{\centering\glossentryname{##1}}
			& \glossentrydesc{##1}
			& \glsunit{##1}\tabularnewline
	}
	\ifglsnogroupskip
        \renewcommand*{\glsgroupskip}{}%
    \else
        \renewcommand*{\glsgroupskip}{}%
    \fi
}

\makeglossaries
\loadglsentries{Bib/Glossary.tex}
\loadglsentries{Bib/Acronyms.tex}
\loadglsentries{Bib/Symbols.tex}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Colors

%% Pallete 1
\definecolor{primary}{RGB}{17, 43, 60}
\definecolor{secondary}{RGB}{32, 83, 117}
\definecolor{accent}{RGB}{246, 107, 14}
\definecolor{background}{RGB}{239, 239, 239}
%% Pallete 2
\definecolor{primarya}{HTML}{9479A3}
\definecolor{secondarya}{HTML}{4f2B4C}
\definecolor{accenta}{HTML}{556280}
\definecolor{backgrounda}{HTML}{B7D6D5}

%% Tables
\definecolor{tabletitle}{RGB}{117, 189, 167}
\definecolor{tablerow}{RGB}{227, 241, 237}

\definecolor{tabletitlegreen}{RGB}{117, 189, 167}
\definecolor{tablerowgreen}{RGB}{227, 241, 237}

\definecolor{tabletitleblue}{RGB}{128, 158, 194}
\definecolor{tablerowblue}{RGB}{229, 235, 242}

%% Cover page
\definecolor{titlepagecolor}{RGB}{0,61,153}
\definecolor{ultralightgreen}{RGB}{244, 249, 241}
\definecolor{lightgreen}{RGB}{150, 240, 180}
\definecolor{green}{RGB}{146, 208, 80}

% Other colors

\definecolor{codeColor}{RGB}{89,156,255}
\definecolor{blue}{RGB}{4, 121, 181}
\definecolor{linecol}{RGB}{92, 92, 92}
\definecolor{lightpink}{RGB}{245, 160, 240}
\definecolor{lightblue}{RGB}{176, 221, 255}
\definecolor{ultralightblue}{RGB}{230, 230, 255}
\definecolor{link}{RGB}{25, 74, 141}
\definecolor{cherry}{RGB}{90, 18, 54}
\definecolor{lilac}{RGB}{174, 182, 211}
\definecolor{cred}{RGB}{190, 60, 45}
\definecolor{lightgray}{RGB}{201, 201, 201}

\definecolor{primary-code}{RGB}{32, 79, 119}
\definecolor{secondary-code}{RGB}{66, 160, 200}
\definecolor{accent-code}{RGB}{94, 116, 209}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Epigraph

\renewcommand\epigraphflush{flushright}
\renewcommand\epigraphsize{\normalsize}
\setlength\epigraphwidth{0.7\textwidth}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Background

%\backgroundsetup{
%	scale=1,
%	angle=0,
%	opacity=1,
%	contents={
%		\begin{tikzpicture}[remember picture,overlay]
%			\path [fill=titlepagecolor] (-0.5\paperwidth,5) rectangle (0.5\paperwidth,10);  
%		\end{tikzpicture}
%	}
%}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Headers & Footers

\fancypagestyle{generalfancy}{%
	\fancyhf{}
	\rfoot{\thepage}
}

\pagestyle{fancy}
\fancyhf{}
\rfoot{\thepage}
\renewcommand{\headrulewidth}{0pt}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Refs & abstract

\hypersetup{
	colorlinks = true,
	citecolor = black,
	linkcolor = black,
	urlcolor = codeColor
}

\providecommand{\keywords}[2][Palabras clave]{
  \small	
  \textbf{\textit{#1 ---}} #2
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Listings

\crefname{lstlisting}{el bloque de instrucciones}{los bloques de instrucciones}
\Crefname{lstlisting}{El bloque de instrucciones}{Los bloques de instrucciones}
\renewcommand{\lstlistingname}{Bloque de instrucciones}

\lstset{frame=tbrl,
	language=Python,
	backgroundcolor=\color{background},
	aboveskip=3mm,
	belowskip=3mm,
	showstringspaces=false,
	columns=flexible,
	basicstyle={\small\ttfamily},
	numbers=none,
	keywordstyle=\color{primary-code},
	stringstyle=\color{secondary-code},
	commentstyle=\color{accent-code},
	breaklines=true,
	breakatwhitespace=true,
	tabsize=3,
	literate={á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1 {ñ}{{\~n}}1
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%